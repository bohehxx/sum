<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>防抖</title>
  </head>
  <body>
    <div
      id="content"
      style="
        height: 150px;
        line-height: 150px;
        text-align: center;
        color: #fff;
        background-color: #ccc;
        font-size: 80px;
      "
    ></div>
   
  </body>
  <script>
    function debounce(func,wait,immediate){
        let timeout;
        return function(){
            let context = this
            let args = arguments
            if(timeout){clearTimeout(timeout)}
            if(immediate){
             let callNow = !timeout
             timeout = setTimeout(()=>{
                 timeout = null
             },wait)
             if(callNow){
                 func.apply(context,args)
             }
            }else{
                timeout = setTimeout(()=>{
                func.apply(context,args)
            },wait)
            }
            
        }
    }
    let num = 1;
    let content = document.getElementById("content");

    function count() {
      content.innerHTML = num++;
    }
    content.onmousemove = debounce(count,1000,true);
  </script>
</html>
<!-- 防抖（debounce）立即执行版的意思是触发事件后函数会立即执行，然后 n 秒内不触发事件才能继续执行函数的效果。
所谓防抖，就是指触发事件后在 n 秒内函数只能执行一次，如果在 n 秒内又触发了事件，则会重新计算函数执行时间。 -->
